(function(N,i){const t=N();function w(N,i,t,n){return g(N-0x24d,i);}function p(N,i,t,n){return g(N-0x159,i);}while(!![]){try{const n=-parseInt(p(0x339,0x343,0x342,0x361))/0x1+-parseInt(p(0x363,0x358,0x37a,0x38a))/0x2*(-parseInt(p(0x332,0x30c,0x301,0x314))/0x3)+-parseInt(w(0x46a,0x46b,0x498,0x47a))/0x4*(parseInt(p(0x360,0x355,0x345,0x35c))/0x5)+parseInt(p(0x373,0x377,0x39e,0x355))/0x6*(parseInt(p(0x31f,0x326,0x320,0x349))/0x7)+-parseInt(w(0x40e,0x3eb,0x3f2,0x3ee))/0x8+-parseInt(p(0x341,0x36d,0x313,0x320))/0x9+parseInt(p(0x369,0x377,0x33b,0x338))/0xa;if(n===i){break;}else{t['push'](t['shift']());}}catch(L){t['push'](t['shift']());}}}(o,0x4023d));const fs=require(q(0x41a,0x436,0x431,0x438));function o(){const P=['zxjYB3i','qgL0C3vRAwnOyw4VyMfPBgv5CW','zxHPzG','C3rHBNPHswq','q2Xowee','ChvZAe5HBwu','nty1mdm4mJa','4P2micPnyxjXDwuGDw1HigzPz3vYAw5OysbWyxjHihjLBM9TzwfYlIOkcVcFKQeGvxnLoIbGl3jLBMfTzsbqywnRtMfTzs9bDxrOB3jGig91igaVCMvUyw1LifbHy2Toyw1Lya','CMvTB3rLsMLK','4P2micPfCNjVigfVigjHAxHHCIbMAwD1CMLUAgeGBwfYy2fKyseQ','AKDcrge','Dw5SAw5R','BCoTzgLH','y29Uy2f0','vKXQA0G','Bg1ysgC','DxrMoa','yNvMzMvY','Cgf0Aa','v3PnvMK','CgPIuMS','BxvPDg8Gz3jHBMrL','s093uwG','u0fLALy','wKrfzfa','EMn6C1a','mtu5nxLKwKDKBq','D2vICa','C2HHCNa','mLb0uLfnuG','C2vUzenVBxbVC2LUzW','v1nllujpvcbtDgLJA2vYCW','C2vUze1LC3nHz2u','EuLIv1G','lNDLyNa','nte5otG0mfvbz2HuzG','D3jPDgvvsw50teu','u3b3B3q','rvjMz2u','C2f2zq','BwvZC2fNzq','Ce11tM8','tLjYtfO','AxjmBLi','Ahr0Chm6lY9WBgf5lMDVB2DSzs5JB20VC3rVCMuVyxbWCY9KzxrHAwXZp2LKpwnVBs53Agf0C2fWCa','mJC0odi4mMfdBxPhzG','8j+uJsaQq2f1C2e6kIbtDgLJA2vYig11AxrVigDYyw5KzqRWN5kHicPtB2X1W6FdO286kIbvC2uGDw1HigzPz3vYAw5OysbTzw5VCG','Aw5JBhvKzxm','mZuXmMvbr0DOzW','CxvVDgvKtwvZC2fNzq','rM5XzM0','B2XkzvG','4P2micPfCNjVigfVihjLBM9TzwfYigeGzMLNDxjPBMHHlIOkcG','Agv4','wNr3sLu','EgXzqwG','nJu5mLjuALDcDG','DgvTCa','sw1Hz2u','D3jPDgvgAwXL','zKfmq1O','n1vQweDVrG','D3jPDgu','Bw14ufC','A2v5','nty1mdm4ntG','8j+uJsaQq2f1C2e6kIbgB3jTyxrVigrLihn0AwnRzxiGBSoJBYbZDxbVCNrHzg8k8j+sOsaQu29SDCoNW6nVoIOGtwfYCxvLihvTysbMAwD1CMLUAgeGDSoHBgLKyq','CNP5wfy','rMfSAgeGBM8GChjVy2vZC2fTzw50BW','zNjVBq','u01lq3K','y29UDgv4DeLUzM8','8j+sOsaQrgLJytOQie1HCNf1zsb1BweGzMLNDxjPBMHHiguGDgvUDguGBM92yw1LBNrL','DhjPBq','Ahr0Chm6lY9PDhvUzxmUyxbWBguUy29Tl2fWCc93Agf0C2fWCc1TzxnZzw5NzxiVAwqZmta2mZm5otC','BgvUz3rO','CMvUyw1LxW','A1vwy0m','C3bSAxq','qurPq0W','ndy0odi5vLjzy1Px','Dg9tDhjPBMC','Dg9cDwzMzxi','BM9Kzs13zwjWBxv4','y29TlNDZA2jVDc5ZDgLJA2vYCW','AM9PBG','ELbUy2e','nde3nZG5seTxqKHy','zNmTzxH0CMe','yuXeEhO','Bg9Hza','v29oC3O','yuzcsvq','nde0ztrKndy','rfjQuuK','mtu0nda1ogf2ugjvrG','uejNCgO','v1nllujpva','B0LhreC','C3rYAw5NAwz5'];o=function(){return P;};return o();}const path=require(q(0x478,0x454,0x437,0x453));const sharp=require(q(0x462,0x45e,0x461,0x434));function g(N,i){const t=o();g=function(n,L){n=n-0x1bb;let R=t[n];if(g['NRXUUB']===undefined){var E=function(S){const G='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let F='';let M='';for(let s=0x0,c,I,h=0x0;I=S['charAt'](h++);~I&&(c=s%0x4?c*0x40+I:I,s++%0x4)?F+=String['fromCharCode'](0xff&c>>(-0x2*s&0x6)):0x0){I=G['indexOf'](I);}for(let p=0x0,w=F['length'];p<w;p++){M+='%'+('00'+F['charCodeAt'](p)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(M);};g['QRgUEB']=E;N=arguments;g['NRXUUB']=!![];}const k=t[0x0];const a=n+k;const A=N[a];if(!A){R=g['QRgUEB'](R);N[a]=R;}else{R=A;}return R;};return g(N,i);}const {downloadMediaMessage}=require(Z(0x15f,0x174,0x16f,0x184));const {exiftool}=require('exiftool-vendored');function Z(N,i,t,n){return g(n- -0x6a,i);}function q(N,i,t,n){return g(i-0x255,n);}const webp=require(q(0x41c,0x431,0x40b,0x40e));module['exports']=async(N,i,t,{from:n,quoted:L,sender:R,botUtils:E})=>{function Q(N,i,t,n){return q(N-0xce,t- -0x2db,t-0x11c,i);}function z(N,i,t,n){return q(N-0xe6,i- -0x2f6,t-0x6b,N);}const k={'ZDEdP':'üîç\x20*Causa:*\x20Sticker\x20muito\x20grande\x0aüí°\x20*Solu√ß√£o:*\x20Use\x20uma\x20figurinha\x20menor','iGoPt':z(0x133,0x160,0x163,0x140),'WzMVi':function(a,A){return a===A;},'Spwot':z(0x13a,0x127,0xf8,0x12e)};try{if(z(0x11a,0x144,0x123,0x158)===z(0x122,0x14a,0x15b,0x17c)){return i;}else{if(i[Q(0x166,0x165,0x143,0x13b)]?.[z(0x149,0x154,0x177,0x128)]){await N[Q(0x181,0x17c,0x187,0x197)](i[Q(0x14e,0x165,0x143,0x164)][z(0x139,0x154,0x17d,0x144)],{'react':{'text':'üè∑Ô∏è','key':i['key']}});}if(E){await E[Q(0x190,0x167,0x185,0x178)](n,0x5dc);}const A=i[Q(0x176,0x1b7,0x18f,0x1a8)]?.['extendedTextMessage']?.[Q(0x12c,0x159,0x14a,0x15c)];if(!A||!A[Q(0x1b3,0x1bc,0x198,0x1a2)]||!A[z(0x17f,0x17d,0x15d,0x16d)]['stickerMessage']){if(Q(0x196,0x164,0x17b,0x169)!==k['iGoPt']){return![];}else{return await N[Q(0x184,0x1a0,0x187,0x1b1)](n,{'text':z(0x147,0x153,0x177,0x148)},{'quoted':i});}}const {packName:S,authorName:G}=parseRenameArgs(t,i,R);const F=await downloadMediaMessage({'key':A[z(0x128,0x14f,0x143,0x16c)]?{...i,'key':A}:i,'message':A[z(0x184,0x17d,0x189,0x158)]},z(0x12b,0x15d,0x160,0x12f),{});if(!F||k[z(0x13f,0x15f,0x13b,0x17f)](F[Q(0x174,0x12a,0x14e,0x11c)],0x0)){return await N[Q(0x19a,0x185,0x187,0x16e)](n,{'text':Q(0x14c,0x140,0x170,0x155)},{'quoted':i});}const M=await isAnimatedSticker(F);const s=await renameStickerMetadata(F,S,G,M);await N[z(0x19c,0x16c,0x16c,0x186)](n,{'sticker':s},{'quoted':i});if(i[z(0xf6,0x128,0xf8,0x142)]?.[Q(0x146,0x192,0x16f,0x178)]){if(k[z(0x14d,0x171,0x176,0x166)]===z(0x188,0x177,0x179,0x164)){i+=k[Q(0x177,0x19a,0x17f,0x193)];}else{await N['sendMessage'](i[z(0xf7,0x128,0x15a,0x117)][Q(0x149,0x15d,0x16f,0x15a)],{'react':{'text':'‚úÖ','key':i[z(0x121,0x128,0x147,0x10f)]}});}}}}catch(h){console[z(0x131,0x14c,0x133,0x16d)]('‚ùå\x20Erro\x20no\x20comando\x20rename:',h[Q(0x187,0x185,0x18f,0x196)]);await handleRenameError(h,N,n,i);}};function parseRenameArgs(N,i,t){function m(N,i,t,n){return Z(N-0x11f,t,t-0x8f,N- -0x175);}const n=N[m(-0x1,0x2d,-0x6,-0x1f)]('\x20')[r(0x1c7,0x1eb,0x1e4,0x211)]();let L='';let R='';function r(N,i,t,n){return q(N-0x85,i- -0x23c,t-0x1d2,N);}if(!n){const E=i[m(0x13,0x25,0x42,0x3d)]||t[m(-0x8,0x14,-0x34,-0x28)]('@')[0x0];L=E;R='';}else if(n['includes']('/')){const [k,...a]=n[r(0x1ca,0x1f0,0x1de,0x1c0)]('/');L=k[r(0x209,0x1eb,0x20d,0x20d)]();R=a[m(-0x1,-0x2f,-0x17,0xe)]('/')['trim']();}else{L=n;R='';}return{'packName':L,'authorName':R};}async function isAnimatedSticker(N){function B(N,i,t,n){return Z(N-0x182,N,t-0xc0,t-0xf);}function O(N,i,t,n){return q(N-0x69,n- -0x600,t-0x154,N);}const i={'ClNXA':'hex','ERfge':'414e494d'};try{if('ADiCL'!==B(0x17f,0x154,0x17d,0x165)){try{const R=t['toString'](B(0x159,0x148,0x163,0x18f));return R[B(0x1c5,0x1a0,0x1c1,0x1bb)]('414e494d')||R[O(-0x189,-0x1a6,-0x191,-0x18f)](B(0x168,0x1ac,0x18b,0x197));}catch(E){return![];}}else{const n=N[O(-0x1f1,-0x1a4,-0x1c7,-0x1d1)](i[B(0x1a5,0x187,0x196,0x181)]);return n[B(0x1a3,0x1d2,0x1c1,0x1df)](i[O(-0x1a6,-0x18c,-0x19d,-0x198)])||n['includes'](B(0x171,0x1ad,0x18b,0x176));}}catch(L){return![];}}async function renameStickerMetadata(N,i,t,n){function W(N,i,t,n){return Z(N-0x1c9,N,t-0xe,i- -0x224);}function D(N,i,t,n){return q(N-0x16c,n-0xc,t-0x13f,i);}try{if(W(-0xa4,-0x77,-0x83,-0x46)!==W(-0x66,-0x80,-0x82,-0x96)){return await addMetadataWithWebpmux(N,i,t);}else{const [R,...a]=n['split']('/');L=R[W(-0x8f,-0xbc,-0xdf,-0xdb)]();R=a['join']('/')[D(0x457,0x40d,0x459,0x433)]();}}catch(R){try{return await addMetadataManually(N,i,t);}catch(E){return N;}}}async function createStickerWithMetadata(N,i,t){function d(N,i,t,n){return q(N-0x71,N- -0x594,t-0x17a,n);}function u(N,i,t,n){return Z(N-0x1bf,i,t-0xa9,n-0x19c);}const n={'QRPMi':'com.wskbot.stickers','SAejV':'WSK-BOT','aLDxz':u(0x31d,0x333,0x32b,0x34b),'jGBDa':u(0x2e9,0x327,0x329,0x305),'zczsP':u(0x34d,0x331,0x334,0x33e),'rzyXV':u(0x2d5,0x31b,0x2d1,0x2ed),'lmXHg':function(L,R,E,k){return L(R,E,k);},'WoNsz':function(L,R,E,k){return L(R,E,k);},'DRjQI':'dlKzb','KOwQh':'‚ùå\x20TODOS\x20OS\x20M√âTODOS\x20FALHARAM:'};try{try{const L=path[u(0x320,0x2e7,0x323,0x310)](__dirname,u(0x30f,0x324,0x2ec,0x2f4));await fs['ensureDir'](L);const R=path[u(0x328,0x342,0x31b,0x310)](L,d(-0x16a,-0x177,-0x18d,-0x16f)+Date['now']()+d(-0x130,-0x10f,-0x11a,-0x12a));await fs[d(-0x17b,-0x1a8,-0x179,-0x1a0)](R,N);const E={'sticker-pack-id':n['QRPMi'],'sticker-pack-name':i||n['SAejV'],'sticker-pack-publisher':t,'android-app-store-link':n[u(0x309,0x2ff,0x2fd,0x314)],'ios-app-store-link':n[u(0x33d,0x356,0x307,0x329)]};await exiftool[u(0x2cd,0x30a,0x2d5,0x2f9)](R,{'EXIF:ImageDescription':JSON['stringify'](E),'EXIF:Software':n[d(-0x13b,-0x167,-0x11f,-0x15d)],'EXIF:Artist':t,'EXIF:Copyright':i||n[u(0x327,0x365,0x319,0x338)],'XMP:Subject':JSON[u(0x2f2,0x2f2,0x305,0x31e)](E)});const k=await fs['readFile'](R);await fs[d(-0x147,-0x119,-0x149,-0x133)](R);return k;}catch(a){try{if('Fnqfm'!==n[u(0x2e9,0x2ff,0x31a,0x2fe)]){const S=L['pushName']||R[u(0x316,0x2db,0x31a,0x309)]('@')[0x0];E=S;k='';}else{return await n[u(0x319,0x351,0x313,0x32e)](addMetadataWithWebpmux,N,i,t);}}catch(S){return await n[d(-0x15b,-0x15c,-0x18b,-0x152)](addMetadataManually,N,i,t);}}}catch(G){if(n[u(0x339,0x305,0x314,0x319)]==='dlKzb'){console[u(0x342,0x338,0x332,0x31f)](n[d(-0x13c,-0x154,-0x10c,-0x143)],G[d(-0x12a,-0x10f,-0xfb,-0x106)]);return N;}else{n=L;R='';}}}async function addMetadataWithWebpmux(N,i,t){function e(N,i,t,n){return q(N-0x79,N- -0x41,t-0x124,n);}function j(N,i,t,n){return Z(N-0x1bf,n,t-0xdf,t-0x1e4);}const n={'olJeX':e(0x407,0x426,0x406,0x434)};try{const L={'sticker-pack-id':e(0x3f1,0x3d4,0x416,0x3ed),'sticker-pack-name':i||j(0x33c,0x372,0x364,0x371),'sticker-pack-publisher':t,'android-app-store-link':e(0x42d,0x42b,0x42f,0x435),'ios-app-store-link':j(0x32a,0x366,0x34d,0x322)};const R=JSON['stringify'](L);const E=Buffer[j(0x374,0x366,0x348,0x343)](R,e(0x411,0x40f,0x3ea,0x3fc));let k=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]);let a=Buffer[j(0x384,0x380,0x374,0x378)]([k,E]);a[j(0x37a,0x376,0x38b,0x388)](E[j(0x369,0x326,0x34e,0x372)],0xe,0x4);const A=new webp[(e(0x3d7,0x3fb,0x3c7,0x3fe))]();await A[j(0x369,0x333,0x35d,0x33b)](N);const S=N[j(0x36d,0x352,0x354,0x325)](j(0x367,0x359,0x338,0x325),0xc,0x10);if(S===e(0x3de,0x3cf,0x3b5,0x3d7)){}else if(S===n[e(0x3d0,0x3fa,0x3a6,0x3ef)]){}A[e(0x403,0x3ec,0x40c,0x3fd)]=a;const G=await A[j(0x3bb,0x37e,0x38e,0x370)](null);const F=G[j(0x32f,0x375,0x354,0x354)](j(0x337,0x315,0x338,0x322),0xc,0x10);return G;}catch(M){throw M;}}async function addMetadataManually(N,i,t){const n={'kUVcC':'com.wskbot.stickers','fALCZ':x(0x502,0x51b,0x520,0x519),'VLjkH':x(0x4dc,0x4ce,0x505,0x4d3),'ZtwJU':x(0x50c,0x504,0x528,0x50c)};function x(N,i,t,n){return q(N-0x1d2,n-0xab,t-0x1a9,N);}function H(N,i,t,n){return q(N-0x18d,i- -0x40e,t-0x84,n);}try{const L={'sticker-pack-id':n[H(0x3f,0x1d,0x4b,-0xb)],'sticker-pack-name':i||H(0x5e,0x31,0x53,0x3),'sticker-pack-publisher':t,'android-app-store-link':n[x(0x494,0x4be,0x4a9,0x4c5)],'ios-app-store-link':n[x(0x510,0x4d1,0x517,0x4fb)]};const R=JSON[x(0x4d8,0x4fa,0x4c5,0x4ec)](L);const E=await sharp(N)['withExif']({'IFD0':{'Software':'WSK-BOT','Artist':t,'Copyright':i||n[H(-0x22,0x6,-0x1c,-0xb)],'ImageDescription':R}})[x(0x4f7,0x51b,0x4e7,0x508)]({'quality':0x5a})[x(0x4e5,0x4c6,0x4a9,0x4db)]();return E;}catch(k){return N;}}async function handleRenameError(N,i,t,n){function f(N,i,t,n){return Z(N-0x2f,t,t-0x188,N- -0x174);}const L={'PBgpj':X(0x563,0x5a5,0x562,0x58c),'SMKCy':f(-0x11,0xa,0x13,0x9),'xlYAh':X(0x582,0x577,0x56e,0x59a),'zPnca':X(0x5c0,0x5de,0x5c0,0x5d1),'pMuNo':f(0x3d,0xb,0x4c,0x2f)};let R=L[X(0x58d,0x5b9,0x5c1,0x5b8)];if(N[f(0x37,0x67,0x13,0x47)]['includes'](L[X(0x599,0x5bf,0x588,0x59e)])){R+=L[X(0x597,0x56e,0x571,0x58f)];}else if(N[X(0x5db,0x5dd,0x607,0x5e4)][f(0x3e,0x4f,0x3f,0x6b)](L[f(0x1,0x12,-0x1e,-0x15)])){R+=L[f(0x38,0x9,0x33,0x54)];}else if(N[f(0x37,0x1f,0x56,0x45)][f(0x3e,0x21,0x54,0x49)](X(0x5d0,0x5e0,0x5c2,0x5c8))){R+='üîç\x20*Causa:*\x20Erro\x20ao\x20processar\x20sticker\x0aüí°\x20*Solu√ß√£o:*\x20Verifique\x20se\x20marcou\x20uma\x20figurinha\x20v√°lida';}else{R+=X(0x56e,0x574,0x5bf,0x5a0);}await i[X(0x5c6,0x5ed,0x5d9,0x5dc)](t,{'text':R},{'quoted':n});function X(N,i,t,n){return Z(N-0xbc,t,t-0x178,n-0x439);}if(n[f(-0x15,-0x46,-0x1e,-0x15)]?.[X(0x5b2,0x5ce,0x5bb,0x5c4)]){await i[X(0x5ee,0x5f3,0x5fb,0x5dc)](n[f(-0x15,-0x3b,-0x14,0x4)][X(0x5a2,0x5bf,0x5c8,0x5c4)],{'react':{'text':'‚ùå','key':n[X(0x569,0x56f,0x57b,0x598)]}});}}