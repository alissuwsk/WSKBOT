(function(X,A){function u(X,A,r,B){return N(A-0x362,r);}function M(X,A,r,B){return N(r- -0x29b,A);}const r=X();while(!![]){try{const B=-parseInt(M(-0xd8,-0x69,-0xa1,-0x90))/0x1+-parseInt(u(0x4bc,0x501,0x503,0x4f9))/0x2+parseInt(M(-0xa6,-0xc5,-0xaa,-0x6b))/0x3*(-parseInt(u(0x528,0x4f9,0x4b1,0x502))/0x4)+-parseInt(u(0x51e,0x505,0x4f9,0x4d2))/0x5*(parseInt(u(0x56e,0x546,0x517,0x586))/0x6)+-parseInt(u(0x511,0x54f,0x591,0x588))/0x7+parseInt(u(0x527,0x56a,0x590,0x588))/0x8*(-parseInt(u(0x5ba,0x578,0x5b9,0x54d))/0x9)+parseInt(M(-0x116,-0x9d,-0xe7,-0x105))/0xa*(parseInt(u(0x4e0,0x4fa,0x4fa,0x53a))/0xb);if(B===A){break;}else{r['push'](r['shift']());}}catch(V){r['push'](r['shift']());}}}(R,0x3089e));function R(){const R0=['t3DUzxiGugfJAW','Cg5N','EvPmDxq','sNnkww8','4P2micPuAxbVigrLig3dRwrPysbUW6nVihn1Cg9YDgfKBYeQcGRWN5kHievUDMLLigfWzw5HCYbPBwfNzw5ZicHkueCSifborYWGzxrJks4','A2v5','u3zUs0q','zg9JDw1LBNrnzxnZywDL','r0vu','zgf0yq','lNbUzW','y1vpEe8','A3vYsK4','4P2micPfCNjVigfVihbYB2nLC3nHCIbHigzPz3vYAw5OysbZzw0GzNvUzg8UkGOk','rhj1B3C','CMvHzezPBgu','Ee5jrK4','ywHIBvK','qKvrvKG','4P2micPfCNjVigfVihbYB2nLC3nHCIbTW61KAweHkGOk8j+sOsbwzxjPzMLXDwuGC2uGysbTW61KAweGW6KGDSoHBgLKysbLihrLBNrLig5VDMfTzw50zs4','B2jQzwn0','v1nllujpvcbtDgLJA2vYCW','DgvTCa','rMfSAgeGyw8GCMvTB3zLCIbMDw5KBW','Aw1Hz2vnzxnZywDL','C3rYAw5NAwz5','Dg9tDhjPBMC','rMfSAgeGyw8GCMvTB3zLCIbMDw5KBYbKysbPBwfNzw0','Aw1Hz2u','v1nllujpva','qgL0C3vRAwnOyw4VyMfPBgv5CW','BxHpAhG','teviCLG','zxHPzNrVB2WTDMvUzg9Yzwq','CxvVDgvKtwvZC2fNzq','BKjhvgG','mZCXmJjYvgLnvhG','vKffuM8','r1Dsug4','nty1mdm4ntG','Ahr0Chm6lY9WBgf5lMDVB2DSzs5JB20VC3rVCMuVyxbWCY9KzxrHAwXZp2LKpwnVBs53Agf0C2fWCa','CgnzvuO','yxjYyxLIDwzMzxi','y29UDgv4DeLUzM8','C3bSAxq','nJqXmZrZwfrizhe','4P2micPozw5ODw1HigLTywDLBsbLBMnVBNrYywrHisOkcVcFKQeGrw52AwuGDw1HigzVDg8GANvUDg8Gy29Tig8Gy29Tyw5KBYWGB3uGBwfYCxvLihvTysbPBwfNzw0GzxHPC3rLBNrLlG','wM56BfK','BwLTzxr5Cgu','nJa1nJDuDNfKu3u','CuflvgK','Ahr0Chm6lY9PDhvUzxmUyxbWBguUy29Tl2fWCc93Agf0C2fWCc1TzxnZzw5NzxiVAwqZmta2mZm5otC','DMLKzw8V','C2vUzenVBxbVC2LUzW','C3rPy2TLCG','8j+sOsaQrgLJytOQifrLBNrLignVBsb1BweGAw1Hz2vTigrPzMvYzw50zsbLBsbMB3jTyxrViePqruCGB3uGue5h','Agn0uxm','y25rEMe','mJa0nJqXwfr2zeLZ','zMLSBa','v3PTChq','4P2mievYCM8GBM8Gy29Tyw5KBYbZDgLJA2vYmJO','Ahr0Ca','B3DUzxjoDw1Izxi','rhn4Cvu','D2vICa','DMLKzw8','thPOsve','Cgf0Aa','s1Djvum','4P2mievYCM8GBM8GChjVy2vZC2fTzw50BYbtAgfYCdO','Du1sr3e','mtm3mdrizNP1vvy','se5nwfm','Bg9Hza','Dev6C2K','D3jPDgvvsw50teu','Dg9cDwzMzxi','C3rHCNrZv2L0Aa','vfPwrK0','zw5ZDxjLrgLY','zMLUza','D3jPDgvgAwXL','zxjYB3i','C3rPy2TLCL8','4P2mifrpre9tie9tie3dIvrpre9tiezbteHbuKfnoG','mJm0BvHLBhr2','zNjVBq','8j+tHcaQq2fZBYbXDwvPCMeGzw0Gzg9JDw1LBNrVkG','ANrYswW','AM9PBG','Aw1Hz2uV','lNDLyNa','wKPHwxq','BgvUz3rO','y29TlNDZA2jVDc5ZDgLJA2vYCW','CMvZAxPL','DxjS','8j+uJsaQq2f1C2e6kIbbCNf1AxzVig11AxrVigDYyw5KzqRWN5kHicPtB2X1W6FdO286kIbfBNzPzsb1BweGAw1Hz2vTig1LBM9Yihf1zsa1tui','C3vJy2vZCW','CgfYDgLJAxbHBNq','tuHNCwy','nty1mdm4mJa','C2f2zq','4P2micPfCNjVigfVigjHAxHHCIbTW61KAweHkGOk4PQG77IpifrLBNrLig5VDMfTzw50zsbJB20GDw1HigLTywDLBsb2W6fSAwrHlG','zxH0zw5KzwruzxH0twvZC2fNzq','vLzoD24','rMfSAgeGBM8GChjVy2vZC2fTzw50BW','C2vUze1LC3nHz2u','nZjctK9WtwS','mtfpCu1ovwy','BwfW','4P2mievYCM8Gyw8Gzgv0zwn0yxiVyMfPEgfYig3dRwrPytO','BwvZC2fNzq','DwPqveC','wwrArxK','8j+uJsaQq2f1C2e6kIbbueKGzguGCMvTB8oNW6nVigrLigz1BMrVigLUzgLZCg9UW612zwWk8j+sOsaQu29SDCoNW6nVoIOGvgvUDguGBM92yw1LBNrLigvTigfSz3vUCYbTAw51Dg9Z','mtaYmJaYy2PLs1jp','zxHPzG','vvjmigrLigrVD25SB2fKig7dO28GzgLZCg9UW612zwW','wKzhDfi','mtq1r3n0z1jK','yKDss2W','zg93BMXVywrFDxjS','Bu5Owfm','D2L0Aev4Awy','EhbnqKS','lI4VlI4VlI4Vy29UzMLNlMPZB24','s29nAfq','ChvZAe5HBwu','C3rPy2TLCJjF','qw1lsK4','Aw5JBhvKzxm','BM93','CMvTB3rLsMLK','t0Tqz0i','DMLLD09Uy2vnzxnZywDL','ANbLzW','mta1mta4mtbjC1jfB3C','s1n4zNK','BxvPDg8Gz3jHBMrL','yxHPB3m','Agv4','BM9Kzs13zwjWBxv4','DMLKzw9nzxnZywDL','twT3zNy','CMvWBgfJzq','8j+uJsaQq2f1C2e6kIbgB3jTyxrVigrLigLTywDLBsbUW6nVihn1Cg9YDgfKBWRWN5kHicPtB2X1W6FdO286kIbvC2uGue5hlcbkuevhig91ifDLyLaGDSoHBgLKB3m','vu52rxa','yNvMzMvY'];R=function(){return R0;};return R();}const fs=require('fs-extra');const path=require(a(0x204,0x1d5,0x1ff,0x1cc));const sharp=require('sharp');const {downloadMediaMessage}=require(G(0x4b5,0x4c3,0x49e,0x4d0));function G(X,A,r,B){return N(r-0x2c0,B);}const {exiftool}=require(G(0x480,0x4ea,0x4a1,0x456));const webp=require(a(0x174,0x17e,0x1b4,0x1e0));const axios=require(G(0x47f,0x4c1,0x477,0x44c));const config=require(G(0x47d,0x477,0x469,0x496));const FormData=require('form-data');const {removeBackground:removeBackgroundAPI}=require('../../../utils/cases');module['exports']=async(X,A,r,{from:B,quoted:V,sender:K,botUtils:i})=>{const H={'KSxfy':function(L,O){return L===O;},'mxOhx':E(-0x6f,-0x4b,-0xa7,-0x6f),'tEzsi':function(L,O,p,s,g){return L(O,p,s,g);},'HNMXS':'image/png','wrPGy':w(0x4f4,0x50c,0x4c9,0x523)};function w(X,A,r,B){return a(X-0xc,X,A-0x314,B-0x34);}function E(X,A,r,B){return a(X-0x46,r,X- -0x253,B-0xad);}try{if(A[w(0x4df,0x4d4,0x49b,0x501)]?.[w(0x49b,0x4bf,0x4d7,0x4d8)]){if(H[E(-0xa3,-0xb9,-0xa0,-0x76)](E(-0x6f,-0x9c,-0x7a,-0xb6),H[E(-0x79,-0x8a,-0x68,-0x41)])){await X[w(0x4a8,0x4a5,0x4c1,0x4ad)](A[w(0x4a4,0x4d4,0x4f3,0x506)][E(-0xa8,-0x73,-0x70,-0x94)],{'react':{'text':'ðŸŽ¨','key':A[E(-0x93,-0xd9,-0x99,-0xcc)]}});}else{B[E(-0x45,-0x83,0x0,-0x5c)](w(0x4fa,0x524,0x518,0x554),V[E(-0xbd,-0xb4,-0xe7,-0x9e)]);return K;}}if(i){await i[w(0x520,0x504,0x517,0x4c2)](B,0x7d0);}const {packName:L,authorName:O}=parseCommandArgs(r,A,config,K);const p=r[E(-0x47,-0x1e,-0x3a,-0x59)](j=>j['startsWith'](E(-0x5a,-0x70,-0x60,-0x80)));let s;if(p){s=await removeBackground(p);}else{const j=await H[w(0x53e,0x51a,0x53c,0x4f1)](detectAndDownloadMedia,A,V,X,B);if(!j[E(-0x35,-0x24,-0x6d,-0x5e)]){return await X[E(-0xc2,-0xb0,-0xd0,-0xf7)](B,{'text':j[w(0x4e3,0x522,0x546,0x4de)]},{'quoted':A});}if(j['isVideo']){return await X[E(-0xc2,-0x96,-0xe1,-0xa4)](B,{'text':'âŒ\x20*Apenas\x20imagens\x20sÃ£o\x20suportadas\x20para\x20remoÃ§Ã£o\x20de\x20fundo!*\x0a\x0aðŸ’¡\x20Envie\x20uma\x20foto\x20para\x20criar\x20sticker\x20sem\x20fundo.'},{'quoted':A});}const e=await sharp(j[E(-0x99,-0x72,-0xba,-0x75)])['resize'](0x400,0x400,{'fit':'inside','withoutEnlargement':!![]})[E(-0xa5,-0xef,-0xcb,-0xca)]({'quality':0x55})[w(0x4f1,0x51c,0x4f2,0x543)]();s=await removeBackground(e);}const g=await processImageWithSharp(s);const z=await addMetadataWithWebpmux(g,L,O);await X[E(-0xc2,-0xec,-0x86,-0xe6)](B,{'sticker':z},{'quoted':A});await new Promise(v=>setTimeout(v,0x3e8));const k=await sharp(s)[w(0x48f,0x4d0,0x4df,0x4d8)]()[E(-0x4b,-0x19,-0x76,-0x79)]();await X[E(-0xc2,-0xca,-0xca,-0x10c)](B,{'document':k,'mimetype':H[w(0x4df,0x518,0x557,0x53e)],'fileName':E(-0x44,-0x34,-0x5,-0x17)+Date[w(0x4d7,0x4be,0x482,0x4e3)]()+w(0x519,0x4d9,0x49e,0x4a1),'caption':w(0x564,0x527,0x534,0x4f6)},{'quoted':A});if(A[w(0x4fd,0x4d4,0x4be,0x507)]?.['remoteJid']){await X['sendMessage'](A[w(0x4f4,0x4d4,0x4de,0x4a9)]['remoteJid'],{'react':{'text':'âœ…','key':A[E(-0x93,-0xb7,-0xd4,-0x4c)]}});}}catch(v){console[w(0x4f3,0x522,0x509,0x540)](H['wrPGy'],v[w(0x46c,0x4aa,0x490,0x4ed)]);await handleStickerError(v,X,B,A);}};function parseCommandArgs(X,A,r,B){const V={'hctQs':t(0x44b,0x3fc,0x40c,0x453),'VAERo':F(0x1df,0x215,0x1c6,0x202),'MHgqf':t(0x421,0x431,0x432,0x427),'ujPTG':'YdZEy','DsxqU':'WSK-BOT','JsJYo':function(L,O){return L&&O;},'ZkwIQ':function(L,O){return L!==O;},'LzhIQ':t(0x428,0x458,0x43f,0x486)};const K=X[t(0x45f,0x424,0x44a,0x411)]('\x20')['trim']();function F(X,A,r,B){return a(X-0xe2,r,B- -0x14,B-0x2e);}function t(X,A,r,B){return a(X-0x140,A,r-0x235,B-0x180);}let i='';let H='';if(K){if(K[t(0x3eb,0x428,0x3de,0x3c7)]('/')){const [L,O]=K[F(0x1c5,0x1d2,0x18b,0x1d3)]('/')[F(0x150,0x19b,0x1c9,0x180)](p=>p['trim']());i=L||'';H=O||'';}else{i=K;H='';}}else{let p='';if(B){p=B[F(0x16f,0x179,0x16a,0x1a3)](/[^0-9]/g,'');}else if(A['key']?.[F(0x1ff,0x22b,0x1e6,0x20b)]){if('SpZjm'===F(0x1a6,0x1af,0x204,0x1d6)){if(K[t(0x3f7,0x41c,0x408,0x436)])return V[t(0x3ef,0x41b,0x428,0x46c)];if(i[F(0x1d1,0x16b,0x163,0x1a1)])return t(0x45f,0x434,0x432,0x423);if(H['stickerMessage'])return t(0x42a,0x42e,0x426,0x44f);if(L[t(0x401,0x3d1,0x3f7,0x428)]?.[F(0x201,0x1cb,0x1c6,0x1d7)]){const z=p[t(0x3d4,0x42c,0x3f7,0x3f7)][t(0x45f,0x412,0x420,0x3e6)];if(z['startsWith'](V[F(0x1a6,0x18d,0x1ea,0x1cc)]))return F(0x194,0x1d4,0x1fe,0x1c3);if(z[F(0x1fd,0x1f7,0x1fc,0x1f5)](t(0x42b,0x409,0x424,0x46e)))return V[t(0x407,0x3c4,0x3bf,0x38a)];}return null;}else{p=A['key'][t(0x410,0x431,0x454,0x479)]['replace'](/[^0-9]/g,'');}}else if(A['key']?.['remoteJid']){if(F(0x181,0x1b3,0x19f,0x184)!==V[t(0x3a3,0x39f,0x3cc,0x3d0)]){r=B[F(0x14b,0x186,0x1a8,0x192)]||t(0x437,0x3fd,0x40d,0x3c3);}else{p=A[t(0x40e,0x438,0x3f5,0x43c)][t(0x3c3,0x3e1,0x3e0,0x40c)][F(0x192,0x1e3,0x1bb,0x1a3)](/[^0-9]/g,'');}}const s=r['ownerNumber']?r[F(0x1b9,0x20b,0x21d,0x1e6)]['replace'](/[^0-9]/g,''):'';H=r['botName']||V[t(0x443,0x434,0x430,0x438)];if(V[t(0x3cf,0x3c0,0x3f3,0x3f1)](p,s)&&p===s){if(V['ZkwIQ'](t(0x419,0x3b4,0x3d6,0x41c),F(0x1a8,0x1ce,0x1a5,0x1b2))){i=A[F(0x1a3,0x173,0x173,0x192)]||r['ownerName']||F(0x1ac,0x164,0x194,0x1a7);}else{throw new r(B['error']||t(0x426,0x3f0,0x407,0x411));}}else{if(V[t(0x42c,0x478,0x433,0x408)]!==F(0x20c,0x220,0x1ce,0x1f6)){B=V(K[F(0x163,0x137,0x151,0x182)][F(0x139,0x19b,0x164,0x17a)][F(0x1b3,0x1b9,0x191,0x1d2)][F(0x183,0x205,0x198,0x1c9)]);}else{i=A['pushName']||F(0x208,0x181,0x1b4,0x1c4);}}}return{'packName':i,'authorName':H};}async function detectAndDownloadMedia(X,A,r,B){const V={'yZLut':function(K,i){return K===i;},'SvnKD':m(0x4ef,0x4d0,0x4f1,0x4c8),'pISQv':b(-0x1ba,-0x19a,-0x163,-0x1b6),'ZvHdr':m(0x44b,0x420,0x470,0x464)};function b(X,A,r,B){return G(X-0x1ef,A-0x65,A- -0x61e,B);}function m(X,A,r,B){return a(X-0x14b,r,B-0x2d7,B-0x1f2);}try{let K;let i=![];let H=null;if(A?.['message']){H=findMediaInMessage(A[b(-0x20d,-0x1c3,-0x183,-0x1df)]);}if(!H&&X[m(0x4b7,0x4aa,0x4a6,0x46d)]?.[b(-0x1b6,-0x1cb,-0x1b6,-0x1ba)]?.[m(0x49f,0x4f2,0x4d1,0x4bd)]?.['quotedMessage']){H=findMediaInMessage(X['message'][b(-0x205,-0x1cb,-0x193,-0x19f)]['contextInfo'][m(0x4bc,0x4ec,0x4c8,0x4b4)]);}if(!H&&X[m(0x44a,0x426,0x474,0x46d)]){H=findMediaInMessage(X[b(-0x184,-0x1c3,-0x1b9,-0x181)]);}if(!H){return{'success':![],'error':b(-0x19d,-0x170,-0x195,-0x188)};}const L=getMediaType(H);if(!L||V[m(0x461,0x450,0x4d9,0x494)](L,V[b(-0x188,-0x198,-0x168,-0x171)])){return{'success':![],'error':V['pISQv']};}i=L===m(0x502,0x4c1,0x4d8,0x4d4);const O={'key':A?.[m(0x466,0x49c,0x48d,0x497)]||X[b(-0x1df,-0x199,-0x1be,-0x180)],'message':H};K=await downloadMediaMessage(O,'buffer',{},{'reuploadRequest':r});if(!K||K[m(0x4e9,0x4aa,0x510,0x4f0)]===0x0){return{'success':![],'error':V['ZvHdr']};}return{'success':!![],'buffer':K,'isVideo':i};}catch(p){console[m(0x4d9,0x4e9,0x500,0x4e5)](b(-0x18e,-0x1c4,-0x1bc,-0x1d9),p['message']);return{'success':![],'error':b(-0x1b1,-0x18b,-0x1b4,-0x19b)};}}function findMediaInMessage(X){function x(X,A,r,B){return a(X-0x1e6,X,A- -0x21f,B-0x1a2);}const A={'xNIFN':function(r,B){return r!==B;},'cnQza':W(0x33b,0x37d,0x36b,0x39b),'uMRGq':function(r,B){return r!==B;},'OKPgB':x(-0x6a,-0x58,-0x46,-0x3e)};if(!X||A[x(-0x93,-0x54,-0x5d,-0x4b)](typeof X,A[W(0x378,0x3a6,0x390,0x346)]))return null;if(X['imageMessage']||X[x(-0xa7,-0x6a,-0x33,-0x6e)]||X[x(-0x90,-0x5d,-0x9a,-0x2d)]){return X;}if(X[W(0x35d,0x318,0x349,0x331)]?.[x(-0xae,-0x89,-0x8c,-0x87)]||X['viewOnceMessageV2']?.[W(0x354,0x36c,0x332,0x34c)]){if(A[W(0x383,0x3b5,0x39e,0x3b8)](A[W(0x377,0x372,0x348,0x375)],W(0x338,0x391,0x363,0x35a))){r=B[W(0x369,0x383,0x353,0x31c)](/[^0-9]/g,'');}else{const B=X[W(0x384,0x375,0x349,0x31d)]?.[x(-0x76,-0x89,-0x78,-0x67)]||X['viewOnceMessageV2']?.[W(0x312,0x37b,0x332,0x30d)];if(B[W(0x384,0x324,0x36f,0x360)]||B['videoMessage']){return B;}}}function W(X,A,r,B){return G(X-0x62,A-0xad,r- -0x129,B);}return null;}function N(X,A){const r=R();N=function(B,V){B=B-0x18f;let K=r[B];if(N['PgnTHc']===undefined){var i=function(p){const s='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let g='';let z='';for(let U=0x0,j,e,v=0x0;e=p['charAt'](v++);~e&&(j=U%0x4?j*0x40+e:e,U++%0x4)?g+=String['fromCharCode'](0xff&j>>(-0x2*U&0x6)):0x0){e=s['indexOf'](e);}for(let Y=0x0,y=g['length'];Y<y;Y++){z+='%'+('00'+g['charCodeAt'](Y)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(z);};N['vvsvxu']=i;X=arguments;N['PgnTHc']=!![];}const H=r[0x0];const L=B+H;const O=X[L];if(!O){K=N['vvsvxu'](K);X[L]=K;}else{K=O;}return K;};return N(X,A);}function getMediaType(X){const A={'BEQVH':'video'};if(X[f(0x148,0x12c,0x11d,0x142)])return f(0x153,0xfa,0x121,0x15b);if(X[f(0x134,0xdc,0xff,0xbb)])return A[c(-0xed,-0xa7,-0x64,-0xa1)];function f(X,A,r,B){return a(X-0x1a0,B,r- -0xb6,B-0x2);}if(X['stickerMessage'])return c(-0x44,-0x83,-0x46,-0x43);function c(X,A,r,B){return G(X-0x14d,A-0x12b,A- -0x539,X);}if(X[f(0x144,0x100,0x10c,0x145)]?.[f(0x171,0x154,0x135,0x144)]){const r=X['documentMessage'][c(-0x6c,-0x89,-0xba,-0x8a)];if(r['startsWith'](f(0x127,0x17b,0x160,0x177)))return c(-0x77,-0x9d,-0x59,-0xc4);if(r['startsWith'](c(-0x67,-0x85,-0xcf,-0x86)))return'video';}return null;}async function removeBackground(X){function S(X,A,r,B){return a(X-0x4d,X,B- -0x38e,B-0x196);}const A={'nBGTh':J(-0xe3,-0x11d,-0xa8,-0xde),'lauOF':S(-0x1a4,-0x17d,-0x1a3,-0x1ad)};function J(X,A,r,B){return a(X-0x157,r,X- -0x2c8,B-0xad);}try{const r=await removeBackgroundAPI(X);if(!r[S(-0x1ae,-0x166,-0x12d,-0x170)]){throw new Error(r[J(-0xba,-0x70,-0xff,-0xfb)]||S(-0x1af,-0x1f3,-0x180,-0x1bc));}const B=r[S(-0x210,-0x208,-0x18a,-0x1ca)];if(!B[S(-0x1ad,-0x1f5,-0x238,-0x1ee)]&&!B[S(-0x14a,-0x1a7,-0x14c,-0x172)]){throw new Error(J(-0x12c,-0xec,-0xff,-0x100));}const V=B[J(-0x128,-0x14c,-0x153,-0xf3)]||B[J(-0xac,-0x67,-0x61,-0x76)];const K=await axios({'method':J(-0x105,-0x129,-0x112,-0xc3),'url':V,'responseType':A[S(-0x165,-0x1d7,-0x1c8,-0x1b0)],'timeout':0xea60});const i=Buffer[S(-0x143,-0x1b1,-0x145,-0x17c)](K['data']);return i;}catch(H){if(A['lauOF']===J(-0xe7,-0xe4,-0xbb,-0xe4)){throw new Error(J(-0xf2,-0x11a,-0xd5,-0xb3));}else{B=V(K['message']);}}}async function processImageWithSharp(X){const A={'LEHrX':'âŒ\x20Erro\x20no\x20processamento\x20Sharp:'};function T(X,A,r,B){return a(X-0x15e,X,B- -0x25,B-0xf7);}function Q(X,A,r,B){return a(X-0x1c1,r,X-0x235,B-0x1ee);}try{const r=await sharp(X)[T(0x1df,0x1e8,0x1b5,0x1f6)](0x200,0x200,{'fit':Q(0x42b,0x3f6,0x45b,0x409)})['webp']({'quality':0x55,'lossless':![],'nearLossless':![],'smartSubsample':![],'effort':0x4,'alphaQuality':0x50})['toBuffer']();return r;}catch(B){console[Q(0x443,0x468,0x40a,0x42b)](A[T(0x1c8,0x17b,0x171,0x1b6)],B['message']);throw new Error('Falha\x20no\x20processamento\x20da\x20imagem');}}function a(X,A,r,B){return N(r- -0x5,A);}async function createStickerWithMetadata(X,A,r){function q(X,A,r,B){return a(X-0x19f,r,B- -0x2ef,B-0x162);}function o(X,A,r,B){return a(X-0xa0,B,A-0xa3,B-0x172);}const B={'VVNwn':o(0x2a7,0x2bd,0x273,0x2bf),'UNvEp':function(V,K){return V||K;},'ahbmY':q(-0xda,-0x11a,-0x14b,-0x11f),'xpMBK':function(V,K,i,H){return V(K,i,H);},'tNyFe':'âŒ\x20TODOS\x20OS\x20MÃ‰TODOS\x20FALHARAM:'};try{try{const V=path['join'](__dirname,q(-0x143,-0x108,-0xf3,-0x11e));await fs[o(0x28a,0x2ae,0x281,0x2c1)](V);const K=path[o(0x2be,0x2b8,0x2e7,0x296)](V,q(-0x187,-0x141,-0x142,-0x148)+Date['now']()+o(0x2bc,0x2ba,0x2b4,0x2e4));await fs[o(0x2f0,0x2b0,0x2f0,0x270)](K,X);const i={'sticker-pack-id':B[q(-0x124,-0x160,-0x141,-0x160)],'sticker-pack-name':A||q(-0xe5,-0xe0,-0xfb,-0x117),'sticker-pack-publisher':r,'android-app-store-link':'https://play.google.com/store/apps/details?id=com.whatsapp','ios-app-store-link':'https://itunes.apple.com/app/whatsapp-messenger/id310633997'};await exiftool['write'](K,{'EXIF:ImageDescription':JSON[o(0x283,0x277,0x280,0x287)](i),'EXIF:Software':q(-0x146,-0x13a,-0x138,-0x117),'EXIF:Artist':r,'EXIF:Copyright':B[q(-0x139,-0xfc,-0x115,-0x136)](A,B[q(-0x147,-0x123,-0xe8,-0x123)]),'XMP:Subject':JSON[q(-0xf8,-0xf1,-0xdc,-0x11b)](i)});const H=await fs[q(-0x155,-0xde,-0x107,-0x125)](K);await fs['unlink'](K);return H;}catch(L){if(q(-0xd2,-0xbf,-0xad,-0xdb)!==o(0x24b,0x24b,0x27b,0x251)){return await B[q(-0x186,-0x136,-0x190,-0x14c)](addMetadataManually,X,A,r);}else{B['error'](o(0x2cc,0x2a4,0x2c8,0x271),V[o(0x260,0x239,0x221,0x217)]);throw new K('Falha\x20no\x20processamento\x20da\x20imagem');}}}catch(p){console[o(0x2fa,0x2b1,0x284,0x2d4)](B['tNyFe'],p['message']);return X;}}async function addMetadataWithWebpmux(X,A,r){function l(X,A,r,B){return G(X-0x1d9,A-0x15e,B- -0x4fe,X);}function h(X,A,r,B){return G(X-0x106,A-0x104,r- -0x82,A);}const B={'qNQgM':l(-0x24,-0x85,-0x28,-0x61),'KWIUC':function(V,K,i,H){return V(K,i,H);}};try{const V={'sticker-pack-id':l(-0x1,-0x4,0x13,-0x1f),'sticker-pack-name':A||B['qNQgM'],'sticker-pack-publisher':r,'android-app-store-link':'https://play.google.com/store/apps/details?id=com.whatsapp','ios-app-store-link':l(-0x2c,-0x5d,-0x59,-0x4b)};const K=JSON[h(0x3f3,0x3e2,0x417,0x441)](V);const i=Buffer['from'](K,'utf8');let H=Buffer[l(0x6,-0x24,0x0,-0x27)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]);let L=Buffer['concat']([H,i]);L[l(-0x31,-0x9,0x4,-0x32)](i['length'],0xe,0x4);const O=new webp['Image']();await O[l(0x5,0x0,-0x16,-0x34)](X);const p=X['toString'](h(0x3d3,0x40f,0x3f6,0x40b),0xc,0x10);if(p===h(0x428,0x439,0x425,0x3ec)){}else if(p===h(0x3a5,0x3aa,0x3ce,0x3c0)){}O[h(0x3fc,0x3fa,0x3de,0x39b)]=L;const s=await O[h(0x3bf,0x408,0x3cf,0x386)](null);const g=s[l(-0x5a,-0x98,-0x8c,-0x64)]('hex',0xc,0x10);return s;}catch(z){return await B[l(-0x75,-0x28,-0xa,-0x39)](addMetadataManually,X,A,r);}}async function addMetadataManually(X,A,r){function D(X,A,r,B){return a(X-0x9,r,A-0x39e,B-0x168);}const B={'Druow':P(0x589,0x593,0x5c7,0x5a2),'qAKTi':P(0x53f,0x525,0x521,0x53b)};function P(X,A,r,B){return a(X-0x17b,r,X-0x36f,B-0x193);}try{const V={'sticker-pack-id':B[D(0x53d,0x567,0x54e,0x53f)],'sticker-pack-name':A||P(0x547,0x4fc,0x565,0x556),'sticker-pack-publisher':r,'android-app-store-link':D(0x587,0x581,0x5cc,0x582),'ios-app-store-link':D(0x57e,0x58c,0x59f,0x58f)};const K=JSON[P(0x543,0x50c,0x54f,0x529)](V);const i=await sharp(X)[D(0x572,0x540,0x535,0x4f8)]({'IFD0':{'Software':'WSK-BOT','Artist':r,'Copyright':A||B[P(0x55c,0x57b,0x563,0x52e)],'ImageDescription':K}})[P(0x56b,0x558,0x522,0x529)]({'quality':0x5a})['toBuffer']();return i;}catch(H){if(D(0x51c,0x543,0x500,0x54f)!==D(0x534,0x554,0x51c,0x59b)){return X;}else{A+=P(0x527,0x522,0x519,0x549);}}}async function handleStickerError(X,A,r,B){function C(X,A,r,B){return G(X-0x18c,A-0x1c4,B- -0x513,A);}const V={'Wzmpt':C(-0xa7,-0xcc,-0xb0,-0xb5),'ZJaYt':C(-0x86,-0xcc,-0xbf,-0xbe),'bGRKl':'ðŸ”\x20*Causa:*\x20Formato\x20de\x20imagem\x20nÃ£o\x20suportado\x0aðŸ’¡\x20*SoluÃ§Ã£o:*\x20Use\x20PNG,\x20JPEG\x20ou\x20WebP\x20vÃ¡lidos'};let K=C(-0xa8,-0x92,-0x79,-0x86);function n(X,A,r,B){return a(X-0x118,X,B- -0x118,B-0x154);}if(X[C(-0x8f,-0x79,-0xa2,-0xb8)][n(0x96,0x5d,0x67,0x91)](n(0xec,0xca,0x8a,0xba))){K+=V[n(0xdc,0xd4,0xd2,0xdf)];}else if(X[n(0x59,0x7b,0x78,0x7e)][n(0x4d,0x84,0x72,0x91)](V[n(0x13e,0xd0,0x137,0x100)])){K+=V[n(0x86,0x65,0x4a,0x87)];}else if(X[C(-0xb5,-0xf5,-0xc3,-0xb8)][C(-0xc4,-0xe4,-0xa4,-0xa5)](n(0x53,0x93,0x69,0x99))){if(C(-0xfa,-0xc6,-0x8a,-0xb1)!=='uStii'){K+=C(-0x1d,-0x3f,-0x5,-0x31);}else{A+=V[C(-0x3b,-0x67,-0x13,-0x57)];}}else{K+=n(0x9b,0x96,0xb3,0xda);}await A[C(-0x8a,-0xc5,-0x7d,-0xbd)](r,{'text':K},{'quoted':B});if(B['key']?.[C(-0xa7,-0xdf,-0xba,-0xa3)]){await A[C(-0x78,-0xaa,-0xf3,-0xbd)](B['key'][n(0xa1,0xb0,0x82,0x93)],{'react':{'text':'âŒ','key':B['key']}});}}